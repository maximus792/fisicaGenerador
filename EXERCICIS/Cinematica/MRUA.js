const data = {
  cinematica: [{
      title: "Exercicis Simples Pla horitzontal MRUA",
      enunciats: [
        "Un cotxe inicalment en repos té una acceleració de [a]m/s<sup>2</sup>, quan temps tardarà en arribar als [v1]km/h? Quina distancia haurà recorregut?",

        "Un cotxe que va a [v1]km/h frena a [a]m/s<sup>2</sup>, quan temps tardarà en frenar? Quina distancia haura recorregut?",

        "Un tren d'alta velocitat en repòs comença el seu trajecte en línia recta amb una acceleració constant de a=[a]m/s<sup>2</sup>. Calcula la velocitat (en quilòmetres per hora) que arriba el tren als [t] minuts.",

        "Calculeu l'acceleració (en m/s<sup>2</sup>) que s'aplica perquè un mòbil que es desplaça en línia recta a [v1] km/h redueixi la velocitat a [v2] km/h en [t] segons.",

        "Un ciclista que està en repòs comença a pedalar fins a assolir els 16.6km/h en [t1] minuts. Calculeu la distància total que recorre si continua accelerant fins als [t2] minuts.",

        "En una carrera on el recorregut és recte, una motocicleta tarda [t] segons en assolir una velocitat de [v]km/h. Si l'acceleració segueix sent la mateixa, quant temps tardaran en recorrer els [d] metres que falten per arribar a la meta i a quina velocitat ho farà?",

        "Un cos té una velocitat inicial de [v0] m/s i una acceleració de [a] m/s2. Quant de temps trigarà a adquirir una velocitat de [vf] Km/h?",

        "Un tren que va a [v0] m/s ha de reduir la velocitat a [vf] m/s. en passar per un pont. Si ha fet l'operació en [t] segons, quin espai ha recorregut en aquest temps?",

        "Una persona és a punt de perdre un tren. En un desesperat intent, corre a una velocitat constant de [v0] m/s. Quan és a [d] m de la darrera porta de l'últim vagó, el tren arrenca amb una acceleració constant de [a] m/s2. Aconseguirà el nostre viatger aprofitar el seu bitllet?",

        "Una motocicleta està aturada en un semàfor que dóna accés a una carretera. A l'instant en què el semàfor canvia a llum verda, li sobrepassa un automòbil que circula a una velocitat de [v1] m/s.        El motorista arrenca amb una acceleració constant de [a] m/s2. Quan triga la motocicleta a arribar al cotxe? Quina distància han recorregut?",
      ],
    },
    {
      title: "Exercicis Simples Pla Vertical MRUA",
      enunciats: [
        "Deixem caure una moneda des d'una alçada de [d] metres. Calcular el temps que triga a posar-se sobre el terra.<br><br><b>Nota:</b> la gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "Des de [d] metres d'alçada es llança cap a terra una ampolla de vidre amb una velocitat inicial de [v0]km/h. Calcular la velocitat de l'ampolla a l'instant previ de trencar-se contra el terra.<br> <br><b>Nota:</b> la gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "Un estudiant de física dispara una pistola llança-pilotes en línia recta des del terra. Segons les especificacions de la pistola, la velocitat de llançament és de [v0] km/h. Calcular l'alçada que arriba a la pilota i el temps que triga a caure a terra des que es dispara... Amb quina velocitat toqués el terra?<br><br><b>Nota:</b> la gravetat és <b>g=9.8m/s<sup> 2</sup></b>.",

        "Soltem un cos a [v] km/h cap a dalt, des d'una determinada alçada i a dalt al terra en [t] segons, des de quina altura l'hem llençat? Quina alçada màxima assoleix?",
      ],
    },
    {
      title: "Exercicis Mitjans Pla Horitzontal MRUA",
      enunciats: [
        "Un avió s'enlaira de la pista d'un aeroport, amb una velocitat de [v] km/h després de recórrer [d] m, partint del repòs. Calcula l'acceleració durant aquest trajecte, el temps que ha trigat a enlairar-se i la distància recorreguda mentre es trobava a terra en l'últim segon.",

        "La velocitat d'un tren es redueix uniformement de [v0] m/s a [v1] m/s. Sabent que durant aquest temps recorre una distància de [d] m, calcula l'acceleració i la distància que recorre a continuació fins aturar-se suposant la mateixa acceleració.",

        "Un mòbil parteix del repòs amb una a = [a] m/s<sup>2</sup>, fins a assolir una velocitat de [v] km/h. Manté aquesta velocitat durant [t1] s, posteriorment frena i s'atura al cap de [t2] s. Calcula el temps total invertit en el recorregut i l'espai total recorregut.",

        "Un conductor que viatja de nit en un automòbil a [v] km/h, veu de sobte els llums de senyalització de una tanca que es troba a [d] m. al mig de la calçada. Si triga [t] s a trepitjar el pedal dels frens i la desacceleració màxima de l'automòbil és de [a] m/s<sup>2</sup>. Xocarà amb la tanca? Si és així, a quina velocitat?",

        "Dos ciclistes surten del mateix lloc alhora. Han de recórrer [d] km. La velocitat del 1r és [v]km/h més gran que la del 2n. Si el primer arriba una hora abans, troba la velocitat de tots dos",

        "Un llebrer veu passar un conill a [d] m de distància. El conill es mou a [vconill] m/s. allunyant-se del llebrer en direcció al seu cau, que es troba a [dconill] m. Transcorreguts [t] s. el llebrer reacciona i, partint del repòs, accelera a [a] m/s2 en persecució del conill. Aconsegueix atrapar-lo abans que arribi al cau? En cas negatiu, quina ha de ser l'acceleració mínima del llebrer per poder atrapar el conill?",

        "Un mòbil partint del repòs accelera a [a] m/s2. fins a assolir els [v] m/s. a continuació manté aquesta velocitat durant [s2] m. i finalment frena i s'atura recorreguts [xf] m. Calcular el temps total i lespai recorregut durant tot el moviment",

        "Un mòbil que viatja a [v0] km/h, redueix la velocitat a [vf] km/h després de recórrer [d] m. Calcular el temps necessari per a aquesta desacceleració.",
      ],
    },
    {
      title: "Exercicis Mitjans Pla Vertical MRUA",
      enunciats: [
        "Es llança un cos cap amunt verticalment des d'un punt O situat a [d] m del terra. El cos arriba a terra [t] s després d'haver estat llançat. Calcula: Velocitat amb què arriba a terra. Alçada màxima. <br><br><b>Nota:</b> La gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "A una alçada de h metres del terra es llancen simultàniament dues boles amb la mateixa velocitat, una verticalment cap amunt i l'altra verticalment cap avall. La primera arriba a terra [t] s. més tard que la segona. Calcula: Amb quina velocitat van ser llançades les boles? Temps que està pujant la primera bola? <br><br><b>Nota:</b> La gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "Un globus puja amb velocitat constant de [vglobus] m/s. Quan es troba a [d] m d'alçada, es deixa caure un llast. Menyspreant els fregaments, determina: El temps que empra el llast en arribar a terra. Distància que recorre el llast des que deixa el globus fins que arriba a terra. Altura del globus quan el llast arriba a terra. <br><br><b>Nota:</b> La gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "Des de quina altura hem de deixar caure un objecte perquè a l'últim segon abans d'arribar a terra recorri una distància de [d] m.? <br><br><b>Nota:</b> La gravetat és <b>g=9.8m/s<sup>2</sup></b>.",

        "Des d'una alçada de [d] metres es deixa caure un objecte. Dos segons més tard se'n llança un altre des del terra cap amunt a la mateixa vertical amb una velocitat de [v2]m/s. A quina alçada es creuen? <br><br><b>Nota:</b> La gravetat és <b>g=9.8m/s<sup>2</sup></b>."
      ],
    },
    {
      title: "Exercicis Mitjans Sistemes de Partícules",
      enunciats: [
        "",

         ],
    },
  ],
};

for (let i = 0; i < data.cinematica.length; i++) {
  var opt = document.createElement("option");

  opt.appendChild(document.createTextNode(data.cinematica[i].title));

  opt.value = i;

  document.querySelector(".select").appendChild(opt);

  //$(".dropwdown-menu").append(`<li><a class="dropdown-item" href="#">${data.cinematica[i].title}</a></li>`)
}

function ran(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}

function subs(string, index, subs) {
  return (
    string.substring(0, index) +
    subs +
    string.substring(string.indexOf("]", index) + 1)
  );
}

function calc2grad(a, b, c) {
  discriminante = Math.pow(b, 2) - 4 * a * c;
  if (discriminante < 0) {
    return [];
  } else if (discriminante == 0) {
    return [parseFloat(-b / (2 * a))];
  } else {
    return [
      parseFloat((-b + Math.sqrt(discriminante)) / (2 * a)),
      parseFloat((-b - Math.sqrt(discriminante)) / (2 * a)),
    ];
  }
}

const ex = document.querySelector(".exercise");
const button = document.querySelector("#generar");
const showSol = document.querySelector(".showSol");

let showsol = false;
showSol.addEventListener("click", () => {
  showsol = !showsol;
  if (showsol) {
    document.querySelector(".showSol").innerHTML = "Amagar Solució";
    document.querySelector(".solution").style.display = "block";
    document.querySelector(".showSol").style.backgroundColor = "#198754";
    document.querySelector(".showSol").style.color = "white";
  } else {
    document.querySelector(".showSol").innerHTML = "Mostrar Solució";
    document.querySelector(".solution").style.display = "none";
    document.querySelector(".showSol").style.backgroundColor = "white";
    document.querySelector(".showSol").style.color = "#198754";
  }
});

window.onload = () => {
  console.log(JSON.parse(localStorage.getItem("dades")));
  gen(JSON.parse(localStorage.getItem("dades")));
};
$(".select").change(() => {
  localStorage.clear();
  gen();
});
button.addEventListener("click", () => {
  localStorage.clear();
  gen();
});

function gen(dades) {
  showsol = false;
  document.querySelector(".showSol").innerHTML = "Mostrar Solució";
  ex.style.display = "none";
  document.querySelector(".showSol").style.backgroundColor = "white";
    document.querySelector(".showSol").style.color = "#198754";
  typeOfExercise = localStorage.getItem("typeOfExercise") ?
    localStorage.getItem("typeOfExercise") :
    document.querySelector(".select").value;
  enun = localStorage.getItem("enun") ?
    localStorage.getItem("enun") :
    ran(0, data.cinematica[typeOfExercise].enunciats.length);
  enun = parseInt(enun);
  console.log("sdsds" + typeOfExercise);
  document.querySelector(".solution").style.display = "none";

  $(".select option:eq(" + typeOfExercise + ")").prop("selected", true);

  //PROVES

  // typeOfExercise = 0;
  // enun = 5;
  document.querySelector(".solution").style.display = "block";

  localStorage.setItem("typeOfExercise", typeOfExercise);
  localStorage.setItem("enun", enun);
  console.log(
    "h " +
    localStorage.getItem("typeOfExercise") +
    " " +
    localStorage.getItem("enun")
  );

  console.log(`typeOfExercise: ${typeOfExercise}, enun: ${enun}`);

  var title = data.cinematica[localStorage.getItem("typeOfExercise")].title;
  var enunciat =
    data.cinematica[localStorage.getItem("typeOfExercise")].enunciats[enun];

  if (typeOfExercise == 0) {
    switch (parseInt(enun)) {
      case 0:
        v1 = dades ? dades.v1 : ran(50, 250);
        a = dades ? dades.a : ran(2, 25) / 10;

        t = v1 / 3.6 / a;
        dist = (a * t * t) / 2;
        dades = {
          v1,
          a,
        };

        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[v1]"), v1);

        document.querySelector(".solution").innerHTML = `tardarà ${t.toFixed(
          2
        )} segons i haurà recorregut ${dist.toFixed(2)} metres`;

        break;

      case 1:
        v1 = dades ? dades.v1 : ran(50, 240);
        a = dades ? dades.a : ran(2, 50) / 20;
        t = v1 / 3.6 / a;
        dist = (v1 / 3.6) * t + -0.5 * a * t * t;

        dades = {
          v1,
          a,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v1]"), v1);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a.toFixed(2));

        document.querySelector(".solution").innerHTML = `Tardarà ${t.toFixed(
          2
        )} segons i recorrera ${dist.toFixed(2)} metres`;

        break;

      case 2:
        t = dades ? dades.t : ran(2, 10);
        a = dades ? dades.a : ran(5, 15) / 10;
        v1 = a * (t * 60);

        dades = {
          t,
          a,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t.toFixed(0));

        document.querySelector(
          ".solution"
        ).innerHTML = `El tren assolira una velocitat de ${
          v1.toFixed(2) * 3.6
        }km/h`;

        break;
      case 3:
        v1 = dades ? dades.v1 : ran(50, 200);
        v2 = dades ? dades.v2 : Math.abs(ran(50, 200) - v1);
        t = dades ? dades.t : ran(10, 60);
        a = (v2 / 3.6 - v1 / 3.6) / t;

        dades = {
          v1,
          v2,
          t,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v1]"), v1);
        enunciat = subs(enunciat, enunciat.indexOf("[v2]"), v2);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'acceleració del tren serà ${a.toFixed(
          2
        )}m/s<sup>2</sup>`;

        break;

      case 4:
        t1 = dades ? dades.t1 : ran(2, 7);
        t2 = dades ? dades.t2 : ran(10, 20);
        a = 16.6 / 3.6 / (t1 * 60);
        dist = 0.5 * a * Math.pow(t2 * 60, 2);

        dades = {
          t1,
          t2,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[t1]"), t1);
        enunciat = subs(enunciat, enunciat.indexOf("[t2]"), t2);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'acceleració del ciclista és ${a.toFixed(
          2
        )}m/s<sup>2</sup> i passats ${t2.toFixed(
          2
        )} minuts, recorrerà ${dist.toFixed(2)} metres`;

        break;

      case 5:
        v = dades ? dades.v : ran(120, 250);
        t = dades ? dades.t : ran(10, 60);
        d = dades ? dades.d : ran(200, 600);
        a = v / 3.6 / t;
        tf = calc2grad(0.5 * a, v / 3.6, d / -1)[0];
        vf = v / 3.6 + a * tf;

        dades = {
          t,
          v,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);
        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(".solution").innerHTML = `Tardarà ${tf.toFixed(
          2
        )} segons en arribar a la meta, a una velocitat de ${(vf * 3.6).toFixed(
          2
        )}km/h`;

        break;

      case 6:
        v0 = dades ? dades.v0 : ran(2, 12);
        a = dades ? dades.a : ran(10, 30) / 10;
        vf = dades ? dades.vf : ran(60, 200);

        t = (vf / 3.6 - v0) / a;

        dades = {
          v0,
          a,
          vf,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[vf]"), vf);

        document.querySelector(".solution").innerHTML = `Tardarà ${t.toFixed(
          2
        )} segons`;

        break;

      case 7:
        v0 = dades ? dades.v0 : ran(30, 60);
        vf = dades ? dades.vf : ran(10, 29);
        t = dades ? dades.t : ran(3, 10);

        a = (vf - v0) / t;
        x = v0 * t + (a * Math.pow(t, 2)) / 2;

        dades = {
          v0,
          vf,
          t,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);
        enunciat = subs(enunciat, enunciat.indexOf("[vf]"), vf);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);

        document.querySelector(
          ".solution"
        ).innerHTML = `Haurà recorregut ${x.toFixed(
          2
        )} metres amb una acceleració de ${a.toFixed(2)} m/s<sup>2</sup>`;

        break;

      case 8:
        v0 = dades ? dades.v0 : ran(20, 40);
        a = dades ? dades.a : ran(1, 20) / 10;
        d = dades ? dades.d : ran(30, 50);

        console.log(calc2grad(0.5 * a, -v0, d));
        t = calc2grad(0.5 * a, -v0, d)[1];
        x = v0 * t;

        dades = {
          v0,
          a,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(
          ".solution"
        ).innerHTML = `Sí, l'agafa als ${t.toFixed(
          2
        )} s, quan la persona ha recorregut ${x.toFixed(2)} m`;

        break;

      case 9:
        v1 = dades ? dades.v1 : ran(20, 40);
        a = dades ? dades.a : ran(20, 50) / 10;

        t = calc2grad(0.5 * a, -v1, 0)[0];
        x = v1 * t;

        dades = {
          v1,
          a,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v1]"), v1);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);

        document.querySelector(
          ".solution"
        ).innerHTML = `El cotxe i la motocicleta es troben als ${t.toFixed(
          2
        )} segons, i han recorregut ${x.toFixed(2)} metres`;

        break;
    }
  } else if (typeOfExercise == 1) {
    switch (enun) {
      case 0:
        d = dades ? dades.d : ran(100, 600);
        v1 = dades ? dades.v1 : ran(5, 120);
        v2 = dades ? dades.v2 : ran(5, 120);
        t = Math.sqrt(d / (0.5 * 9.8));
        console.log(t);
        dist = (v1 / 3.6) * t[0];

        dades = {
          d,
          v1,
          v2,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(".solution").innerHTML = `Tardarà ${t.toFixed(
          2
        )} segons en arribar al terra`;

        break;

      case 1:
        d = dades ? dades.d : ran(100, 1500);
        v0 = dades ? dades.v0 : ran(5, 20);
        t = calc2grad(0.5 * -9.8, v0 / 3.6, d)[1];
        vf = v0 / 3.6 - 9.8 * t;

        dades = {
          d,
          v0,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);

        document.querySelector(".solution").innerHTML = `Tardarà ${t.toFixed(
          2
        )} segons en arribar al terra, amb una velocitat de ${Math.abs(
          vf * 3.6
        ).toFixed(2)} km/h (${(vf * 3.6).toFixed(2)} km/h)`;

        break;

      case 2:
        v0 = dades ? dades.v0 : ran(90, 150);
        t = v0 / 3.6 / 9.8;
        h = (v0 / 3.6) * t + 0.5 * -9.8 * Math.pow(t, 2);
        tf = calc2grad(-4.9, v0 / 3.6, 0)[1];

        dades = {
          v0,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);

        document.querySelector(".solution").innerHTML = `Tardarà ${t.toFixed(
          2
        )} segons en arribar a la màxima altura(${h.toFixed(
          2
        )} metres). Tardarà ${tf.toFixed(
          2
        )} segons en arribar al terra. <p>Tocara el terra amb la mateixa velcoitat, però negativa(${
          v0 / -1
        } km/h)</p>`;

        break;

      case 3:
        v = dades ? dades.v : ran(20, 100);
        t = dades ? dades.t : ran(5, 10);

        dades = {
          v,
          t,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        h = ((v / 3.6) * t - 4.9 * Math.pow(t, 2)) * -1;
        talt = v / 3.6 / 9.8;
        hmax = h + ((v / 3.6) * talt - 4.9 * Math.pow(talt, 2));

        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'hem llençat des de ${h.toFixed(
          2
        )} metres. I assoleix una altura màxima de ${hmax.toFixed(2)} metres`;

        break;
    }
  } else if (typeOfExercise == 2) {
    switch (enun) {
      case 0:
        d = dades ? dades.d : ran(50, 200) * 10;
        v = dades ? dades.v : ran(120, 250);

        dades = {
          d,
          v,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        a = Math.pow(v / 3.6, 2) / (2 * d);
        t = v / 3.6 / a;

        dist = d - 0.5 * a * Math.pow(t - 1, 2);

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'acceleració de l'avió és ${a.toFixed(
          2
        )} m/s<sup>2</sup>, i triga ${t.toFixed(
          2
        )} segons en enlairar-se. En l'ultim segon ha recorregut ${dist.toFixed(
          2
        )} metres`;

        break;

      case 1:
        v0 = dades ? dades.v0 : ran(10, 20);
        v1 = dades ? dades.v1 : ran(5, 9);
        d = dades ? dades.d : ran(100, 200);

        dades = {
          v0,
          v1,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        a = (Math.pow(v1, 2) - Math.pow(v0, 2)) / (2 * d);
        dist = -Math.pow(v0, 2) / (2 * a);

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);
        enunciat = subs(enunciat, enunciat.indexOf("[v1]"), v1);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'acceleració és ${a.toFixed(
          2
        )} m/s<sup>2</sup> i en aturar-se, haurà recorregut ${dist.toFixed(
          2
        )} metres.`;

        break;

      case 2:
        a = dades ? dades.a : ran(5, 25) / 10;
        v = dades ? dades.v : ran(75, 150);
        t1 = dades ? dades.t1 : ran(40, 70) / 10;
        t2 = dades ? dades.t2 : ran(50, 90) / 10;

        dades = {
          a,
          v,
          t1,
          t2,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        a1 = -(v / 3.6) / t2;

        t0 = v / 3.6 / a;
        dist1 = 0.5 * a * Math.pow(t0, 2);
        dist2 = (v / 3.6) * t1;
        dist3 = (v / 3.6) * t2 + 0.5 * a1 * Math.pow(t2, 2);

        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);
        enunciat = subs(enunciat, enunciat.indexOf("[t1]"), t1);
        enunciat = subs(enunciat, enunciat.indexOf("[t2]"), t2);

        document.querySelector(
          ".solution"
        ).innerHTML = `<b>1r TRAM:</b> ${t0.toFixed(2)} s ${dist1.toFixed(
          2
        )} m<br><b>2n TRAM:</b> ${t1} s  ${dist2.toFixed(
          2
        )} m<br><b> 3r TRAM: </b>${t2} s ${dist3.toFixed(
          2
        )} m<br> <b>Total: </b>${(t0 + t1 + t2).toFixed(2)}s ${(
          dist1 +
          dist2 +
          dist3
        ).toFixed(2)} m`;

        break;

      case 3:
        v = dades ? dades.v : ran(75, 150);
        d = dades ? dades.d : ran(30, 70);
        t = dades ? dades.t : ran(5, 10) / 10;
        a = dades ? dades.a : ran(8, 15);

        dades = {
          v,
          d,
          t,
          a,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        xant = (v / 3.6) * t;
        t1 = v / 3.6 / a;
        x = xant + (v / 3.6) * t1 + -0.5 * a * Math.pow(t1, 2);
        if (Math.pow(v / 3.6, 2) + -2 * (d - xant) * a > 0)
          document.querySelector(
            ".solution"
          ).innerHTML = `El cotxe xocara amb la tanca, a una velocitat de ${Math.sqrt(
            Math.pow(v / 3.6, 2) + -2 * (d - xant) * a
          ).toFixed(2)}m/s`;
        else
          document.querySelector(
            ".solution"
          ).innerHTML = `El cotxe no xocara amb la tanca, es quedara a ${(
            d - x
          ).toFixed(2)} metres`;

        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);

        break;

      case 4:
        vdif = dades ? dades.vdif : ran(1, 5);
        d = dades ? dades.d : ran(80, 100);

        dades = {
          vdif,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        v2 = -vdif / 2 + Math.sqrt(d * vdif + Math.pow(vdif, 2) / 4);
        v1 = v2 + 1;

        enunciat = subs(enunciat, enunciat.indexOf("[v]"), vdif);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(
          ".solution"
        ).innerHTML = `La velocitat del primer ciclista és ${v1.toFixed(
          2
        )} km/h i la velocitat del segon és ${v2.toFixed(
          2
        )} km/h<br><br>Sistema d'equacions:<br>Tenint en compte que: v1=v2+${vdif}<br>(v1) · (t2 − 1) = ${d} ; v2 · t2=${d}`;

        break;

      case 5:
        d = dades ? dades.d : ran(70, 120);
        vconill = dades ? dades.vconill : ran(5, 8);
        dconill = dades ? dades.dconill : ran(50, 70);
        t = dades ? dades.t : ran(10, 20) / 10;
        a = dades ? dades.a : ran(4, 20) / 10;

        dades = {
          d,
          vconill,
          dconill,
          t,
          a,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        xconill = vconill * t;
        d += xconill;
        tconill = (dconill - xconill) / vconill;
        xllebrer = 0.5 * a * Math.pow(tconill, 2);

        if (xllebrer >= d)
          document.querySelector(
            ".solution"
          ).innerHTML = `El llebrer en el temps que el conill tarda en arribar al cau(${tconill.toFixed(
            2
          )} s) recorre ${xllebrer.toFixed(
            2
          )} metres, per tant, atrapa al conill`;
        else
          document.querySelector(
            ".solution"
          ).innerHTML = `El llebrer en el temps que el conill tarda en arribar al cau(${tconill.toFixed(
            2
          )} s) recorre ${xllebrer.toFixed(
            2
          )} metres, per tant, no atrapa al conill`;

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[vconill]"), vconill);
        enunciat = subs(enunciat, enunciat.indexOf("[dconill]"), dconill);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);
        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);

        break;

      case 6:
        a = dades ? dades.a : ran(15, 25) / 10;
        v = dades ? dades.v : ran(50, 70);
        s2 = dades ? dades.s2 : ran(400, 600);
        xf = dades ? dades.xf : ran(150, 300);

        dades = {
          a,
          v,
          s2,
          xf,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        t1 = v / a;
        s1 = 0.5 * a * Math.pow(t1, 2);

        t2 = s2 / v;

        s3 = xf;
        a3 = -Math.pow(v, 2) / (2 * xf);
        t3 = -v / a3;

        enunciat = subs(enunciat, enunciat.indexOf("[a]"), a);
        enunciat = subs(enunciat, enunciat.indexOf("[v]"), v);
        enunciat = subs(enunciat, enunciat.indexOf("[s2]"), s2);
        enunciat = subs(enunciat, enunciat.indexOf("[xf]"), xf);

        document.querySelector(
          ".solution"
        ).innerHTML = `<b>Tram 1:</b> ${t1.toFixed(2)}s, ${s1.toFixed(
          2
        )}m<br><b>Tram 2:</b> ${t2.toFixed(2)}s, ${s2.toFixed(
          2
        )}m<br><b>Tram 3:</b> ${t3.toFixed(2)}s, ${s3.toFixed(
          2
        )}m<br><br><b>En total:</b> ${(t1 + t2 + t3).toFixed(2)}s, ${(
          s1 +
          s2 +
          s3
        ).toFixed(2)}m`;

        break;

      case 7:
        v0 = dades ? dades.v0 : ran(50, 80);
        vf = dades ? dades.vf : ran(30, 49);
        d = dades ? dades.d : ran(50, 100);

        dades = {
          v0,
          vf,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        a = (Math.pow(vf / 3.6, 2) - Math.pow(v0 / 3.6, 2)) / (2 * d);

        t = (vf / 3.6 - v0 / 3.6) / a;

        enunciat = subs(enunciat, enunciat.indexOf("[v0]"), v0);
        enunciat = subs(enunciat, enunciat.indexOf("[vf]"), vf);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(
          ".solution"
        ).innerHTML = `L'acceleració és ${a.toFixed(
          2
        )}m/s<sup>2</sup> i el temps ${t.toFixed(2)}s`;

        break;
    }
  } else if (typeOfExercise == 3) {
    switch (enun) {
      case 0:
        d = dades ? dades.d : ran(20, 50);
        t = dades ? dades.t : ran(30, 60) / 10;

        dades = {
          d,
          t,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        v0 = (d - 4.9 * Math.pow(t, 2)) / -t;
        v = v0 - 9.8 * t;
        ta = v0 / 9.8;
        hmax = d + v0 * ta - 4.9 * Math.pow(ta, 2);

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);

        document.querySelector(".solution").innerHTML = `V0 = ${v0.toFixed(
          2
        )} m/s, velocitat final: ${v.toFixed(
          2
        )} m/s. Altura màxima: ${hmax.toFixed(2)} m`;

        break;

      case 1:
        t = dades ? dades.t : ran(30, 70) / 10;

        dades = {
          t,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        tmax = t / 2;
        v0 = 9.8 * tmax;

        enunciat = subs(enunciat, enunciat.indexOf("[t]"), t);

        document.querySelector(
          ".solution"
        ).innerHTML = `La pilota tardarà ${tmax.toFixed(
          2
        )} s en arribar a dalt de tot. Les pilotes son llençades a una velocitat de ${v0.toFixed(
          2
        )} m/s.<br><br><b>Explicació:</b> La pilota tarda ${t} s més que l'altra, per tant, és el temps que està pujant fins a l'altura màxima i baixa fins al punt d'inici, des d'aquest punt, tardarà el mateix que l'altra pilota en arribar a baix, ja que la velocitat inicial és igual. En conseqüencia, la pilota tardarà la meitat del temps en arribar al punt més alt.`;

        break;

      case 2:
        vglobus = dades ? dades.vglobus : ran(30, 70) / 10;
        d = dades ? dades.d : ran(30, 70) / 10;

        t = calc2grad(-4.9, vglobus, 200)[1];
        tdalt = vglobus / 9.8;
        ymax = 0 + vglobus * tdalt - 4.9 * Math.pow(tdalt, 2);
        ymax = ymax + (d + ymax);
        hglobus = d + vglobus * (t + tdalt * 2);

        dades = {
          vglobus,
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[vglobus]"), vglobus);
        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(".solution").innerHTML = `${t.toFixed(
          2
        )} s ${ymax.toFixed(2)} ${hglobus.toFixed(2)}`;

        break;

      case 3:
        d = dades ? dades.d : ran(5, 20);


        t = (d + 4.9) / 9.8
        h = 4.9 * Math.pow(t, 2)

        dades = {
          d,
        };
        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);

        document.querySelector(".solution").innerHTML = `L'hem de tirar des d'una altura d'${h.toFixed(2)} metres, i caurà en ${t.toFixed(2)} segons. <br><i> Hem d'utilitzar un sistema d'equacions que relacioni l'equació de moviment del cos al terra i a 10m d'altura</i>`;

        break;
        



      case 4:
        d = dades ? dades.d : ran(50, 25);
        v2 = dades ? dades.v2 : ran(20, 40);
        
        dades = {
          d,v2
        };

        localStorage.setItem("dades", JSON.stringify(dades));

        enunciat = subs(enunciat, enunciat.indexOf("[d]"), d);
        enunciat = subs(enunciat, enunciat.indexOf("[v2]"), v2);

        t=(d+19.6+2*v2)/(v2+19.6)
        h=d-4.9 * Math.pow((d+19.6+2*v2)/(v2+19.6),2)
        

        
      
     document.querySelector(".solution").innerHTML = `Els cossos es trobaran a ${h.toFixed(2)}m en un total de ${t.toFixed(2)}s`;
        

        

        

        break;
    }
  }

  document.querySelector(".title").innerHTML =
    title + ` - Enunciat ${parseInt(enun) + 1}`;
  document.querySelector(".enunciat").innerHTML = enunciat;
  ex.style.display = "block";
}
/*
console.log(localStorage.getItem("v1"));
			if(localStorage.getItem("v1") === null) {
				localStorage.setItem("v1",v1)
			}
			else v1=localStorage.getItem("v1")
*/

//https://www.academiaalcover.es/curso/fisica-primero-bachillerato-cinematica/